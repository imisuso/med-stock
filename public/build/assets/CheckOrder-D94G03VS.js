import{A as b}from"./AppLayout-6pK9au1e.js";import{_ as y}from"./OrderDetail-DB74V1Dd.js";import{_}from"./ModalUpToYou-CxscJv0q.js";import{r as f,u as C,j as h,f as l,c as n,k as a,a as e,b as V,o as s,d as m,t as i,F as A,g as B,e as x}from"./app-BAzGNY5n.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Navbar-J242VETL.js";const M={key:0,class:"alert-banner fixed right-0 m-2 w-2/3 md:w-full max-w-sm"},j={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-green-300 shadow-xs rounded-md text-green-800 font-bold",title:"close",for:"banneralert"},H={key:1,class:"flex justify-center text-red-600"},L={class:"text-md font-bold text-red-600"},O={key:0,class:"text-sm text-red-500"},$={key:1,class:"text-sm text-red-500"},z={key:2,class:"text-sm text-red-500"},N=["href"],S=["href"],F=["onClick"],I={class:"text-gray-900 text-md font-medium dark:text-white"},D={class:"flex justify-start w-full text-sm text-red-900"},Q={__name:"CheckOrder",props:{order_lists:Array,view_checkin:Array,years:[2022,2021,2020,2019,2018]},setup(c){const u=f(!1),p=f(0),d=C({confirm_order_id:0,confirm_order_year:0,confirm_stockname_order:""}),v=o=>{u.value=!0,p.value=o.order_no,d.confirm_order_id=o.id,d.confirm_order_year=o.year,d.confirm_stockname_order=o.stock.stockname},w=()=>{u.value=!1},g=()=>{u.value=!1,d.post(route("approve-order"),{preserveState:!1,preserveScroll:!0})};return(o,t)=>(s(),h(b,null,{default:l(()=>[o.$page.props.flash.status==="success"?(s(),n("div",M,[t[1]||(t[1]=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1)),e("label",j,[m(i(o.$page.props.flash.msg)+" ",1),t[0]||(t[0]=e("svg",{class:"fill-current text-white",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1))])])):a("",!0),t[7]||(t[7]=e("div",{class:"flex justify-between my-2"},[e("div",{class:"font-bold"},"รายการใบสั่งซื้อวัสดุ จากสาขา/หน่วย"),e("div",null,[e("select",{name:"",id:"",class:"w-full bg-white border border-gray-400 hover:border-gray-500 px-2 py-2 pr-6 rounded-xs shadow-xs focus:outline-hidden focus:shadow-outline"},[e("option",{value:""},"รายการทั้งหมด"),e("option",{value:""},"รายการที่ยังไม่ส่งมาภาคฯ"),e("option",{value:""},"รายการที่ยังไม่ได้อนุมัติ"),e("option",{value:""},"รายการที่อนุมัติแล้ว"),e("option",{value:""},"รายการที่ถูกตรวจรับวัสดุแล้ว")])])],-1)),c.order_lists.length===0?(s(),n("div",H,[...t[2]||(t[2]=[e("label",{for:""},"ไม่พบรายการใบสั่งซื้อวัสดุ",-1)])])):a("",!0),(s(!0),n(A,null,B(c.order_lists,(r,k)=>(s(),h(y,{key:r.id,orderIndex:k,orderList:r},{stockname:l(()=>[e("p",L,i(r.stock.stockname),1)]),messagesuggest:l(()=>[r.status==="created"?(s(),n("span",O,"รอสาขา/หน่วยกดปุ่มส่งเอกสารสั่งซื้อ และส่งเอกสารตัวจริงมาที่ภาควิชาฯ ")):a("",!0),r.status==="send"?(s(),n("span",$,"เมื่อหัวหน้าภาควิชาฯ เซ็นอนุมัติแล้ว ให้กดปุ่มอนุมัติ")):a("",!0),r.status==="approve"?(s(),n("span",z," รอสาขา/หน่วย ตรวจรับวัสดุ ภายใน 7 วันทำการ นับจากวันที่ได้รับอนุมัติ ")):a("",!0)]),buttongroup:l(()=>[r.status==="checkin"?(s(),n("a",{key:0,href:o.route("print-checkin",r.id),target:"blank"},[...t[3]||(t[3]=[e("span",{class:"flex flex-row text-sm py-1 px-2 leading-5 text-white bg-yellow-500 rounded-md"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z","clip-rule":"evenodd"})]),m(" เอกสารตรวจรับวัสดุ ")],-1)])],8,N)):a("",!0),r.status==="checkin"?(s(),n("a",{key:1,href:o.route("print-checkin",r.id),target:"blank"},[...t[4]||(t[4]=[e("span",{class:"flex flex-row text-sm ml-2 py-1 px-2 leading-5 text-white bg-green-600 rounded-md"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-7a2 2 0 012-2h2m3-4H9a2 2 0 00-2 2v7a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-1m-1 4l-3 3m0 0l-3-3m3 3V3"})]),m(" บันทึกข้อมูลลงระบบ SAP แล้ว ")],-1)])],8,S)):a("",!0),r.status==="send"?(s(),n("button",{key:2,onClick:E=>v(r),class:"inline-flex text-sm ml-3 bg-green-500 hover:bg-green-700 text-white py-1 px-4 border border-green-500 rounded-xs"},[...t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})],-1),m(" อนุมัติ ",-1)])],8,F)):a("",!0)]),_:2},1032,["orderIndex","orderList"]))),128)),V(_,{isModalOpen:u.value},{header:l(()=>[...t[6]||(t[6]=[e("p",{class:"text-md font-bold text-red-600"},"คุณต้องการอนุมัติใบสัญญาสั่งซื้อวัสดุนี้ใช่หรือไม่?",-1)])]),body:l(()=>[e("div",I,[e("label",D," ใบสั่งซื้อเลขที่:"+i(p.value)+"/"+i(x(d).confirm_order_year)+" ของ "+i(x(d).confirm_stockname_order),1)])]),footer:l(()=>[e("div",{class:"w-full text-center md:block"},[e("button",{class:"mx-4 md:mb-0 bg-green-600 px-5 py-2 text-sm shadow-xs font-medium tracking-wider border text-white rounded-full hover:shadow-lg hover:bg-green-400",onClick:g}," ตกลง "),e("button",{class:"mx-4 md:mb-0 bg-red-500 border border-red-500 px-5 py-2 text-sm shadow-xs font-medium tracking-wider text-white rounded-full hover:shadow-lg hover:bg-red-600",onClick:w}," ยกเลิก ")])]),_:1},8,["isModalOpen"])]),_:1}))}};export{Q as default};
