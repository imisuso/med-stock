import{r as c,u as j,i as u,j as B,f as F,c as n,k as p,a as e,o as s,d as m,t as i,w as b,e as f,F as g,g as w,l as v}from"./app-BjFdi1bE.js";import{A as L}from"./AppLayout-rYe8tSBi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Navbar-LFwvqw_Z.js";const C={key:0,class:"alert-banner fixed right-0 m-4 w-2/3 md:w-full max-w-sm"},S={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-green-300 shadow-xs rounded-md text-green-800 font-bold",title:"close",for:"banneralert"},V={key:1,class:"alert-banner fixed right-0 m-4 w-2/3 md:w-full max-w-sm"},$={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-white shadow-xs rounded-md border-2 border-red-600 text-red-800 font-bold",title:"close",for:"banneralert"},I={class:"w-full p-4 mt-2 flex-col justify-center bg-blue-100 rounded-md"},M={class:"w-full bg-blue-100 p-2 rounded-md"},A={class:"text-xl text-center"},E=["value"],N={class:"mt-3"},U={key:0,class:"text-red-600"},z=["value"],D={class:"w-full flex flex-col justify-center text-center"},H={class:""},T={key:0,class:"text-red-600"},O={class:"p-2"},K={__name:"StockItemImport",props:{stocks:{type:Array},unit:{type:Object}},setup(h){const a=c(""),d=c(!1),x=c(!1),y=[{type_id:"1",type_name:"ใบสัญญาสั่งซื้อ"},{type_id:"2",type_name:"ใบสั่งซื้อ"}],o=j({file_stock_item:File,stock_id:u().props.auth.user.unitid?u().props.auth.user.unitid:0,unit_id:u().props.auth.user.unitid?u().props.auth.user.unitid:0,stock_item_status:0}),_=(r=>{o.file_stock_item=r.target.files[0]}),k=(()=>{if(o.stock_item_status===0)return d.value=!0,a.value="กรุณาเลือกประเภทการจัดซื้อวัสดุ",!1;if(d.value=!1,document.getElementById("uploadFile").value=="")return x.value=!0,a.value="กรุณาเลือกไฟล์ excel รายการวัสดุที่ต้องการนำเข้าระบบ",!1;d.value=!1,o.post(route("stock-item-import-show"),{preserveState:!0,preserveScroll:!0})});return(r,t)=>(s(),B(L,null,{default:F(()=>[r.$page.props.flash.status==="success"?(s(),n("div",C,[t[4]||(t[4]=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1)),e("label",S,[m(i(r.$page.props.flash.msg)+" ",1),t[3]||(t[3]=e("svg",{class:"fill-current text-white",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1))])])):p("",!0),r.$page.props.flash.status==="error"?(s(),n("div",V,[t[6]||(t[6]=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1)),e("label",$,[m(i(r.$page.props.flash.msg)+" ",1),t[5]||(t[5]=e("svg",{class:"fill-current text-red-600",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1))])])):p("",!0),t[11]||(t[11]=e("div",{class:"w-full p-4 mt-2 justify-center bg-red-100"},[e("p",{class:"flex font-bold underline"},"กรุณาอ่าน:คำแนะนำการนำเข้าวัสดุจากไฟล์ excel"),e("p",null,"1.ตรวจสอบชื่อคอลัมน์และจำนวนคอลัมน์ให้ถูกต้องตามตัวอย่างไฟล์ excel"),e("div",{class:"flex"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 text-green-700"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 8.25H7.5a2.25 2.25 0 00-2.25 2.25v9a2.25 2.25 0 002.25 2.25h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25H15M9 12l3 3m0 0l3-3m-3 3V2.25"})]),e("a",{href:"../../../../docs/ตัวอย่างข้อมูลวัสดุที่จะนำเข้าระบบวัสดุ_UAT.xlsx",class:"underline underline-offset-2 font-extrabold text-green-700"}," download ตัวอย่างไฟล์รายการวัสดุ ")]),e("p",null,"2.ตรวจสอบจำนวนรายการวัสดุต้องไม่เกิน 50 รายการต่อ 1 ไฟล์ excel"),e("p",null,"3.ตรวจสอบ Format Cell ให้ตรงกับตัวอย่างไฟล์ excel ทุกคอลัมน์"),e("p",null,"4.ถ้าเป็นวัสดุใหม่ รหัสวัสดุต้องไม่ซ้ำกับวัสดุที่มีอยู่แล้ว ถ้ารหัสวัสดุซ้ำระบบจะนำจำนวนสั่งซื้อครั้งนี้ไปบวกเพิ่มให้อัตโนมัติ และปรับปรุงข้อมูลราคาให้อัตโนมัติ แต่ถ้าเป็นรหัสวัสดุใหม่ระบบจะเพิ่มรายการวัสดุเป็นรายการใหม่")],-1)),e("div",I,[t[10]||(t[10]=e("div",{class:"bg-blue-800 text-white text-center text-lg font-bold"},[e("p",{class:"my-2"},"นำเข้าข้อมูลวัสดุจากไฟล์ Excel ตรวจรับวัสดุ")],-1)),e("div",M,[e("div",A,i(r.$page.props.unit.unitname),1),t[8]||(t[8]=e("div",{class:"mt-3"},[e("label",{for:""},"เลือกคลังวัสดุที่ต้องการเพิ่มวัสดุ")],-1)),b(e("select",{name:"",id:"",class:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-2 py-2 pr-6 rounded-xs shadow-xs leading-tight focus:outline-hidden focus:shadow-outline","onUpdate:modelValue":t[0]||(t[0]=l=>f(o).stock_id=l)},[(s(!0),n(g,null,w(h.stocks,l=>(s(),n("option",{key:l.id,value:l.id},i(l.stockname),9,E))),128))],512),[[v,f(o).stock_id]]),e("div",N,[t[7]||(t[7]=e("label",{for:""},"เลือกประเภทการจัดซื้อวัสดุ",-1)),d.value?(s(),n("label",U," !!"+i(a.value),1)):p("",!0)]),b(e("select",{name:"",id:"",class:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-2 py-2 pr-6 rounded-xs shadow-xs leading-tight focus:outline-hidden focus:shadow-outline","onUpdate:modelValue":t[1]||(t[1]=l=>f(o).stock_item_status=l)},[(s(),n(g,null,w(y,l=>e("option",{key:l.type_id,value:l.type_id},i(l.type_name),9,z)),64))],512),[[v,f(o).stock_item_status]])]),e("div",D,[e("div",H,[t[9]||(t[9]=m(" เลือกไฟล์ excel รายการวัสดุที่ต้องการนำเข้าคลังสาขา ",-1)),e("input",{type:"file",name:"file",id:"uploadFile",class:"file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-2 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-200",onChange:_},null,32)]),e("div",null,[x.value?(s(),n("label",T," !!"+i(a.value),1)):p("",!0)]),e("div",O,[e("button",{type:"submit",class:"w-full flex justify-center text-sm bg-green-500 hover:bg-green-700 text-white py-2 px-6 border border-green-500 rounded-xs",onClick:t[2]||(t[2]=l=>k())}," ตกลง ")])])])]),_:1}))}};export{K as default};
