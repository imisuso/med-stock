import{r as x,C as M,h,p as S,i as C,e as w,o as l,c as o,a as e,b,t as d,j as i,w as p,k as N,u as c,f as v,F as _,v as V,q as L,d as k,P as O,W as E}from"./app-D0dg4ktR.js";import{A as P}from"./AppLayout-BJKdIcXC.js";import{_ as q}from"./PaginateMe-DQGCYBVW.js";import{d as y,b as z}from"./buddhistEra-DDBH1div.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Navbar-B_O4qWE3.js";const A={key:0,class:"alert-banner fixed right-0 m-2 w-5/6 md:w-full max-w-sm"},D={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-red-300 shadow rounded-md text-red-800 font-bold",title:"close",for:"banneralert"},F={class:"flex flex-col mb-2 text-md font-bold text-gray-900"},R={class:"m-2"},$={key:0,class:"text-red-600"},I=["value"],T={class:"flex flex-col"},U={key:1,class:"p-2 mt-3 text-center text-red-600 font-bold"},W={key:2,class:"p-2 mt-3 text-center font-bold"},G={class:"p-2 mt-1 text-center font-bold"},H={key:3,class:"p-2 text-center font-bold"},J={key:4,class:"w-full"},K={key:5,class:"w-full p-2"},Q={key:0},X={class:"w-full mt-3"},Y={class:"flex flex-col lg:flex-row"},Z={class:"bg-blue-100 lg:bg-transparent lg:w-2/12 lg:text-xs"},ee={for:"",class:""},te={class:"font-bold"},se={for:"",class:"text-blue-600"},le={class:"lg:w-1/12"},oe={class:"inline-flex px-2 text-lg font-semibold leading-5 text-green-800 bg-green-100 rounded-full"},re={class:"lg:w-1/12"},de={class:"ml-2"},ne={class:"lg:w-3/12 lg:text-xs"},ae={class:"ml-2"},ie={class:"lg:w-2/12 lg:text-xs"},ce={key:0,for:"",class:"text-xs text-green-700"},ue={key:1,for:"",class:"text-xs text-yellow-600"},fe={class:"ml-2"},me={class:"lg:w-1/12 lg:text-xs"},be={class:"ml-2"},ge={class:"lg:w-1/12 lg:text-xs"},xe={class:"ml-2"},he={class:"lg:w-1/12"},we=["href"],Be={__name:"ListReportStock",props:{stocks:{type:Object,required:!1},stock_items:Object,stock_items_count:{type:Number},stock_selected:{type:Number},stock_selected_name:{type:Object,required:!1},filters:{type:Object}},setup(r){y.extend(z);const f=r;let u=x(f.filters.search);const m=x(!1),a=M({stock_selected:f.stock_selected?f.stock_selected:0,unitid:h().props.auth.user.unitid?h().props.auth.user.unitid:0}),g=n=>n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");S(u,n=>{E.get(route("report-list",a.unitid),{search:n,stock_selected:a.stock_selected},{preserveState:!0,replace:!0})});const j=()=>{if(m.value=!1,a.stock_selected.length==0)return m.value=!0,!1;a.get(route("report-list",a.unitid),{preserveState:!0,preserveScroll:!0,onSuccess:n=>{},onError:n=>{},onFinish:n=>{}})};return(n,t)=>(l(),C(P,null,{default:w(()=>[n.$page.props.flash.status=="error"?(l(),o("div",A,[t[4]||(t[4]=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1)),e("label",D,[b(d(n.$page.props.flash.msg)+" ",1),t[3]||(t[3]=e("svg",{class:"fill-current text-white",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1))])])):i("",!0),t[16]||(t[16]=e("h4",{class:"mt-3 text-center text-black"},"ระบุชื่อคลังวัสดุที่ต้องการดูรายงาน",-1)),e("div",F,[e("div",R,[t[5]||(t[5]=e("label",{for:""},"เลือกชื่อคลังวัสดุ",-1)),m.value?(l(),o("label",$," !กรุณาเลือกคลังวัสดุ")):i("",!0),p(e("select",{name:"",id:"","onUpdate:modelValue":t[0]||(t[0]=s=>c(a).stock_selected=s),class:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-2 py-2 pr-6 rounded shadow leading-tight focus:outline-none focus:shadow-outline"},[(l(!0),o(_,null,v(r.stocks,s=>(l(),o("option",{key:s.id,value:s.id},d(s.stockname),9,I))),128))],512),[[N,c(a).stock_selected]])])]),e("div",T,[e("button",{class:"w-full flex justify-center px-8 py-2 mb-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-400 focus:outline-none",onClick:t[1]||(t[1]=s=>j())}," ค้นหา ")]),r.stock_items_count==0?(l(),o("h1",U,"ไม่พบข้อมูลวัสดุในคลังที่ต้องการดูรายงาน ")):i("",!0),r.stock_items_count!=0?(l(),o("h1",W,"รายงานจำนวนคงเหลือในคลังวัสดุ ")):i("",!0),e("h1",G,d(c(a).stock_selected.text),1),r.stock_selected_name?(l(),o("h1",H,d(r.stock_selected_name.stockname),1)):i("",!0),r.stock_items_count!=0?(l(),o("div",J,[p(e("input",{type:"text",placeholder:"พิมพ์รหัสวัสดุ หรือชื่อวัสดุ หรือชื่อบริษัท ที่ต้องการค้นหา","onUpdate:modelValue":t[2]||(t[2]=s=>L(u)?u.value=s:u=s),class:"mt-2 border-green-600 border-2 block w-full shadow-sm sm:text-sm rounded-md"},null,512),[[V,c(u)]])])):i("",!0),r.stock_items_count!=0?(l(),o("div",K,[e("div",null,[r.stock_items?(l(),o("div",Q,[k(q,{pagination:r.stock_items},null,8,["pagination"])])):i("",!0),t[6]||(t[6]=e("div",{class:"w-full my-3 border-b-4 border-gray-500 shadow-sm hidden lg:block"},[e("div",{class:"flex flex-col text-xs lg:flex-row lg:justify-between mx-2"},[e("div",{class:"lg:w-2/12"}," SAP-ชื่อวัสดุ "),e("div",{class:"lg:w-1/12"}," จำนวนคงเหลือ "),e("div",{class:"lg:w-1/12"}," ราคา "),e("div",{class:"lg:w-3/12"}," ชื่อบริษัท "),e("div",{class:"lg:w-2/12"}," Pur.Order "),e("div",{class:"lg:w-1/12"}," Invoice Number "),e("div",{class:"lg:w-1/12"}," วันที่รับเข้า "),e("div",{class:"lg:w-1/12 text-xs"}," ประวัติรับเข้า-เบิกออก ")])],-1))]),e("div",X,[(l(!0),o(_,null,v(r.stock_items.data,(s,B)=>(l(),o("div",{key:s.index,class:"w-full border-b-2 border-gray-500 shadow-sm"},[e("div",Y,[e("div",Z,[e("label",ee,d(r.stock_items.from+B)+". ",1),e("label",te,[b(d(s.item_code)+" ",1),e("label",se,"-"+d(s.item_name),1)])]),e("div",le,[t[8]||(t[8]=e("label",{for:"",class:"lg:hidden"},"จำนวนคงเหลือ:",-1)),e("span",oe,[t[7]||(t[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1)),b(" "+d(g(s.item_balance)),1)])]),e("div",re,[t[9]||(t[9]=e("label",{for:"",class:"lg:hidden"},"ราคา:",-1)),e("label",de,d(g(s.price_last)),1)]),e("div",ne,[t[10]||(t[10]=e("label",{for:"",class:"lg:hidden"},"ชื่อบริษัท:",-1)),e("label",ae,d(s.business_name),1)]),e("div",ie,[t[11]||(t[11]=e("label",{for:"",class:"lg:hidden"},"Pur.Order:",-1)),s.status==1?(l(),o("label",ce,"สัญญาซื้อ")):(l(),o("label",ue,"ใบสั่งซื้อ")),e("label",fe,d(s.pur_order),1)]),e("div",me,[t[12]||(t[12]=e("label",{for:"",class:"lg:hidden"},"Invoice Number:",-1)),e("label",be,d(s.invoice_number),1)]),e("div",ge,[t[13]||(t[13]=e("label",{for:"",class:"lg:hidden"},"วันที่รับเข้า:",-1)),e("label",xe,d(c(y)(s.checkin_last.date_action).locale("th").format("D MMM BBBB")),1)]),e("div",he,[t[15]||(t[15]=e("label",{for:"",class:"hidden"}," ประวัติรับเข้า-เบิกออก",-1)),k(c(O),{href:n.route("list-stock-item",s)},{default:w(()=>t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 text-green-700"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])),_:2},1032,["href"])])])]))),128)),e("a",{class:"flex justify-center mt-3 px-8 py-1 text-md text-white bg-blue-700 rounded-sm shadow-md hover:bg-blue-500 focus:outline-none",href:n.route("export-balance-stock",r.stock_items.data[0].stock_id)}," Export Excel ",8,we)])])):i("",!0)]),_:1}))}};export{Be as default};
