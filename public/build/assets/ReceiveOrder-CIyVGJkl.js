import{C as w,g,h as v,i as y,e as h,o as l,c as n,a as e,b as i,t as s,j as a,f as k,w as b,v as c,u as p,F as j}from"./app-CP6RF8In.js";import{A as L}from"./AppLayout-6jvfy5Lo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Navbar-O2L6vFPL.js";const _={key:0,class:"alert-banner fixed right-0 m-2 w-5/6 md:w-full max-w-sm"},C={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-green-300 shadow rounded-md text-green-800 font-bold",title:"close",for:"banneralert"},B={key:1,class:"alert-banner fixed right-0 m-2 w-5/6 md:w-full max-w-sm"},V={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-red-700 shadow rounded-md text-white font-bold",title:"close",for:"banneralert"},M={class:"bg-pink-50"},N={class:"w-full flex justify-center font-bold"},$={class:"w-full flex justify-between p-2 my-2 border-b-2 border-gray-600 font-bold"},A={key:0,class:"flex justify-center text-green-700 text-lg"},O={class:"flex"},U={class:"font-bold"},q={class:"font-bold text-green-600 mx-4"},z={class:"flex flex-row"},F={class:"font-bold text-red-500 mx-4"},D={class:"flex flex-row"},H={class:"font-bold text-green-600 mx-4"},I={key:0,class:"flex flex-row"},S={class:"font-bold text-blue-600 mx-4"},T={key:1,class:"flex flex-col lg:flex-row mb-2 text-md font-bold text-gray-900"},E={class:"m-2"},R=["onUpdate:modelValue"],G={class:"m-2"},J=["onUpdate:modelValue"],K={key:2,class:"w-full flex justify-center"},Y={__name:"ReceiveOrder",props:{order:{type:Object,required:!0},old_items_sum:{type:Object,required:!0},stockname:{type:String,required:!0}},setup(o){const d=w({date_receive:[],date_expire:[],order_id:null});g(()=>{d.order_id=v().props.order.id});const x=()=>{console.log("CF order"),d.post(route("checkin-order"),{})};return(f,t)=>(l(),y(L,null,{default:h(()=>[f.$page.props.flash.status==="success"?(l(),n("div",_,[t[2]||(t[2]=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1)),e("label",C,[i(s(f.$page.props.flash.msg)+" ",1),t[1]||(t[1]=e("svg",{class:"fill-current text-white",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1))])])):a("",!0),f.$page.props.errors.error?(l(),n("div",B,[t[4]||(t[4]=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1)),e("label",V,[i(s(f.$page.props.errors.error)+" ",1),t[3]||(t[3]=e("svg",{class:"fill-current text-white",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1))])])):a("",!0),e("div",M,[t[6]||(t[6]=e("div",{class:"w-full flex justify-center font-bold"},"บันทึกการตรวจรับวัสดุจากใบสัญญาสั่งซื้อ",-1)),e("div",N,s(o.stockname),1),e("div",$,[e("div",null,"เลขที่ใบสั่งซื้อ:"+s(o.order.order_no)+"/"+s(o.order.year),1),o.order.status==="checkin"?(l(),n("div",A,t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1),i(" ตรวจรับวัสดุเรียบร้อยแล้ว ")]))):a("",!0),e("div",null,"วันที่อนุมัติ:"+s(o.order.timeline.approve_datetime)+" น.",1)])]),(l(!0),n(j,null,k(o.order.items,(r,u)=>(l(),n("div",{key:u,class:"w-full flex flex-col p-2 my-2 space-y-2 bg-pink-100 border-2 border-gray-500 rounded"},[e("div",O,[e("span",U,s(u+1)+". "+s(r[0].sap)+"-"+s(r[0].item_name),1),t[7]||(t[7]=e("span",{class:"font-bold mx-2"}," จำนวนสั่งซื้อ: ",-1)),e("span",q,s(r[0].order_input),1),t[8]||(t[8]=e("span",{class:"font-bold"},"ชิ้น",-1))]),e("div",z,[t[9]||(t[9]=e("span",{class:"font-bold"}," จำนวนก่อนสั่งซื้อ: ",-1)),e("span",F,s(o.order.timeline.item_sum_before_order[u]),1),t[10]||(t[10]=e("span",{class:"font-bold"},"ชิ้น",-1))]),e("div",D,[t[11]||(t[11]=e("span",{class:"font-bold"}," จำนวนคงเหลือปัจจุบัน: ",-1)),e("span",H,s(o.old_items_sum[u]),1),t[12]||(t[12]=e("span",{class:"font-bold"},"ชิ้น",-1))]),o.order.status!=="checkin"?(l(),n("div",I,[t[13]||(t[13]=e("span",{class:"font-bold"}," จำนวนรวมหลังตรวจรับ: ",-1)),e("span",S,s(parseInt(r[0].order_input)+parseInt(o.old_items_sum[u])),1),t[14]||(t[14]=e("span",{class:"font-bold"},"ชิ้น",-1))])):a("",!0),e("div",null,[t[15]||(t[15]=e("span",{class:"inline-block font-bold"}," บริษัทผู้ขาย:",-1)),i(" "+s(r[0].business_name),1)]),e("div",null,[t[16]||(t[16]=e("span",{class:"inline-block font-bold"}," Cat.No/Lot.No:",-1)),i(" "+s(r[0].catalog_number)+"/"+s(r[0].lot_number),1)]),o.order.status!=="checkin"?(l(),n("div",T,[e("div",E,[t[17]||(t[17]=e("label",{for:""},"วันที่รับเข้า:",-1)),b(e("input",{type:"date",name:"",id:"","onUpdate:modelValue":m=>p(d).date_receive[r[0].id]=m,class:"w-full px-12 py-2 border-2 rounded-md appearance-none focus:border-indigo-600 focus:ring focus:ring-opacity-40 focus:ring-indigo-500"},null,8,R),[[c,p(d).date_receive[r[0].id]]])]),e("div",G,[t[18]||(t[18]=e("label",{for:""},"วันที่หมดอายุ:",-1)),b(e("input",{type:"date",name:"",id:"","onUpdate:modelValue":m=>p(d).date_expire[r[0].id]=m,class:"w-full px-12 py- border-2 rounded-md appearance-none focus:border-indigo-600 focus:ring focus:ring-opacity-40 focus:ring-indigo-500"},null,8,J),[[c,p(d).date_expire[r[0].id]]])])])):a("",!0)]))),128)),o.order.status==="approve"?(l(),n("div",K,[e("button",{onClick:t[0]||(t[0]=r=>x(o.order.id)),class:"flex flex-row text-md py-1 px-6 ml-3 bg-green-500 hover:bg-green-700 text-white text-center border border-green-500 rounded"},t[19]||(t[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 4H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-2m-4-1v8m0 0l3-3m-3 3L9 8m-5 5h2.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293h3.172a1 1 0 00.707-.293l2.414-2.414a1 1 0 01.707-.293H20"})],-1),i(" ตรวจรับวัสดุ ")]))])):a("",!0)]),_:1}))}};export{Y as default};
