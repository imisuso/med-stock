import{C as N,r as b,i as q,e as u,o as r,c as d,a as e,b as a,t as o,j as n,u as m,d as w,f as z,F as E,w as H,v as I}from"./app-CP6RF8In.js";import{A as F}from"./AppLayout-6jvfy5Lo.js";import{_ as k}from"./ModalUpToYou-Bop7fH5u.js";import{_ as T}from"./PaginateMe-CMG0KNBD.js";import{d as f,b as U}from"./buddhistEra-DwBBCdWO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Navbar-O2L6vFPL.js";const W={key:0,class:"alert-banner fixed right-0 m-2 w-5/6 md:w-full max-w-sm"},G={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-green-300 shadow rounded-md text-green-800 font-bold",title:"close",for:"banneralert"},J={key:1,class:"alert-banner fixed right-0 m-2 w-5/6 md:w-full max-w-sm"},K={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-red-300 shadow rounded-md text-red-800 font-bold",title:"close",for:"banneralert"},Q={key:2,class:"alert-banner fixed right-0 m-2 w-5/6 md:w-full max-w-sm"},R={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-yellow-200 shadow rounded-md text-red-800 font-bold",title:"close",for:"banneralert"},X={key:3,class:"mt-2 bg-blue-800 text-white text-xl text-center"},Y={class:"w-full mt-2 p-2"},Z={class:"w-full bg-purple-100 mt-3 border-2 border-purple-300 rounded-lg lg:max-w-full lg:flex"},ee={class:"w-full leading-normal border-b border-l border-r border-gray-200 rounded-b lg:border-l-0 lg:border-t lg:border-gray-200 lg:rounded-b-none lg:rounded-r"},te={class:"mb-2"},le={class:"p-2 text-md font-bold text-gray-900"},oe={for:"",class:"text-blue-600"},se={key:0,class:"flex flex-col lg:flex-col mb-2 text-md font-bold text-gray-900"},re={class:"flex ml-2"},de={class:"ml-2 text-red-600"},ne={class:"flex ml-2"},ie={class:"ml-2 text-blue-600"},ae={key:0,class:"flex ml-2"},ue={class:"ml-2 text-blue-600"},ce={key:1,class:"flex ml-2"},be={class:"ml-2 text-blue-600"},me={key:4},fe={class:"min-w-full border-collapse block md:table md:rounded-md"},ge={class:"block md:table-row-group"},pe={class:"text-left block md:table-cell md:border-b-2 md:border-gray-300"},we={class:"inline-flex px-2 text-lg font-semibold leading-5"},xe={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-green-800 bg-green-100 rounded-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},he={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-red-800 bg-red-100 rounded-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ke={key:0},ve={class:"text-left block md:table-cell md:border-b-2 md:border-gray-300"},ye={key:0},_e=["onClick"],Me={class:"text-left block md:table-cell md:border-b-2 md:border-gray-300"},Be={key:0,class:"text-sm"},Ce={class:"text-left block md:table-cell md:border-b-2 md:border-gray-300"},je={class:"text-left text-sm block md:table-cell md:border-b-2 md:border-gray-300"},Le={key:0,for:""},$e=["onClick"],Oe=["onClick"],De={class:"text-gray-900 text-md font-medium"},Se={class:"flex justify-start w-full text-md"},Ve={class:"flex justify-start w-full text-md"},Pe={class:"text-gray-900 text-md font-medium"},Ae={class:"flex justify-start w-full text-md"},Te={__name:"ItemDetail",props:{stock_item:{type:Object,required:!0},stock:{type:Object,required:!0},item_trans:{type:Object},checkin_last:{type:Object},item_balance:{type:Number},count_name:String,can_abilities:{type:Object,required:!0},can:{type:Object,required:!0}},setup(i){f.extend(U);const c=N({item_tran_id:0,price_edit_new:0,update_item:""}),g=b(!1),v=b(""),y=b(""),p=b(!1),C=b(""),x=s=>s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),h=b(!1),_=b(""),j=(s,t)=>{h.value=!0,_.value=t,c.item_tran_id=s},L=()=>{h.value=!1},$=()=>{c.update_item="price",c.post(route("edit-price-item"),{preserveState:!1,preserveScroll:!0})},O=s=>{p.value=!0,C.value=s,c.item_tran_id=s},D=()=>{p.value=!1,c.post(route("cancel-checkout-stock-item"),{preserveState:!1,preserveScroll:!0})},S=()=>{p.value=!1},V=(s,t,l)=>{g.value=!0,v.value=t,y.value=l,c.item_tran_id=s},P=()=>{g.value=!1,c.post(route("cancel-checkin-stock-item"),{preserveState:!1,preserveScroll:!0})},A=()=>{g.value=!1},M=()=>{history.back()};return(s,t)=>(r(),q(F,null,{default:u(()=>[s.$page.props.flash.status==="success"?(r(),d("div",W,[t[4]||(t[4]=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1)),e("label",G,[a(o(s.$page.props.flash.msg)+" ",1),t[3]||(t[3]=e("svg",{class:"fill-current text-white",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1))])])):n("",!0),s.$page.props.flash.status==="error"?(r(),d("div",J,[t[6]||(t[6]=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1)),e("label",K,[a(o(s.$page.props.flash.msg)+" ",1),t[5]||(t[5]=e("svg",{class:"fill-current text-white",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1))])])):n("",!0),s.$page.props.flash.status==="Warnning"?(r(),d("div",Q,[t[8]||(t[8]=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1)),e("label",R,[a(o(s.$page.props.flash.msg)+" ",1),t[7]||(t[7]=e("svg",{class:"fill-current text-white",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1))])])):n("",!0),e("button",{onClick:t[0]||(t[0]=l=>M()),class:"flex text-gray-600 font-bold"},t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})],-1),a(" กลับ ")])),i.checkin_last?(r(),d("div",X,o(s.$page.props.stock.stockname),1)):n("",!0),e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[e("div",le,[a(" SAP:"+o(i.stock_item.item_code)+" ",1),e("label",oe,o(i.stock_item.item_name),1),a(" (หน่วย: "+o(i.count_name)+") ",1)]),i.checkin_last?(r(),d("div",se,[e("div",re,[t[10]||(t[10]=a(" จำนวนคงเหลือ : ")),e("p",de,o(x(i.item_balance)),1)]),e("div",ne,[t[11]||(t[11]=a(" Pur.Order : ")),e("p",ie,o(i.checkin_last.pur_order),1)]),i.checkin_last?(r(),d("div",ae,[t[12]||(t[12]=a(" วันหมดอายุ : ")),e("p",ue,o(m(f)(i.checkin_last.date_expire).locale("th").format("D MMMM BBBB")),1)])):n("",!0),i.checkin_last?(r(),d("div",ce,[t[13]||(t[13]=a(" วันที่รับเข้า : ")),e("p",be,o(m(f)(i.checkin_last.date_action).locale("th").format("D MMMM BBBB")),1)])):n("",!0)])):n("",!0)])])])]),t[31]||(t[31]=e("label",{for:"",class:"text-red-600 text-sm"}," *ลบได้เฉพาะผู้ที่บันทึกรายการนี้เท่านั้น",-1)),t[32]||(t[32]=e("div",{class:"flex"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-green-800 bg-green-100 rounded-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})]),e("label",{for:"",class:"text-sm"}," ข้อมูลการรับวัสดุเข้าคลัง")],-1)),t[33]||(t[33]=e("div",{class:"flex"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-red-800 bg-red-100 rounded-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})]),e("label",{for:"",class:"text-sm"}," ข้อมูลการเบิกวัสดุ")],-1)),i.item_trans?(r(),d("div",me,[w(T,{pagination:i.item_trans},null,8,["pagination"])])):n("",!0),e("table",fe,[t[24]||(t[24]=e("thead",{class:"block md:table-header-group"},[e("tr",{class:"border border-grey-500 md:border-none block md:table-row absolute -top-full md:top-auto -left-full md:left-auto md:relative"},[e("th",{class:"bg-blue-300 p-2 text-black font-bold md:border md:border-grey-300 text-left block md:table-cell md:rounded-lg"}," วันที่[Pur.Order]"),e("th",{class:"bg-blue-300 p-2 text-black font-bold md:border md:border-grey-300 text-left block md:table-cell md:rounded-lg"}," จำนวน[ราคาต่อหน่วย]"),e("th",{class:"bg-blue-300 p-2 text-black font-bold md:border md:border-grey-300 text-left block md:table-cell md:rounded-lg"}," บริษัท"),e("th",{class:"bg-blue-300 p-2 text-black font-bold md:border md:border-grey-300 text-left block md:table-cell md:rounded-lg"}," ผู้ปฎิบัติ"),e("th",{class:"bg-blue-300 p-2 text-black font-bold md:border md:border-grey-300 text-left block md:table-cell md:rounded-lg"}," ::")])],-1)),e("tbody",ge,[(r(!0),d(E,null,z(i.item_trans.data,l=>(r(),d("tr",{key:l.id,class:"bg-white my-2 p-2 mb-2 border-2 rounded-md border-gray-500 block md:border-none md:table-row"},[e("td",pe,[t[16]||(t[16]=e("span",{class:"inline-block w-1/3 md:hidden font-bold"},"วันที่",-1)),e("span",we,[l.action==="checkin"?(r(),d("svg",xe,t[14]||(t[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)]))):n("",!0),l.action==="checkout"?(r(),d("svg",he,t[15]||(t[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},null,-1)]))):n("",!0)]),a(" "+o(m(f)(l.date_action).locale("th").format("D MMM BBBB"))+" ",1),l.action==="checkin"?(r(),d("label",ke," ["+o(l.pur_order)+"]",1)):n("",!0)]),e("td",ve,[t[18]||(t[18]=e("span",{class:"inline-block w-1/3 md:hidden font-bold"},"จำนวน[ราคาต่อหน่วย]",-1)),a(" "+o(l.item_count)+" ",1),l.action==="checkin"?(r(),d("label",ye," ["+o(x(l.price))+"]",1)):n("",!0),l.status!=="canceled"&&l.action==="checkin"&&l.user_id===s.$page.props.auth.user.id?(r(),d("button",{key:1,onClick:B=>j(l.id,l.price),class:"ml-3 bg-green-300 hover:bg-green-200 border border-green-600 text-green-800 font-bold py-1 px-2 rounded-md"},t[17]||(t[17]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})],-1)]),8,_e)):n("",!0)]),e("td",Me,[t[19]||(t[19]=e("span",{class:"inline-block w-1/3 md:hidden font-bold"},"บริษัท",-1)),l.action==="checkin"?(r(),d("label",Be,o(l.business_name),1)):n("",!0)]),e("td",Ce,[t[20]||(t[20]=e("span",{class:"inline-block w-1/3 md:hidden font-bold"},"ผู้ปฎิบัติ",-1)),a(o(l.user.name),1)]),e("td",je,[t[23]||(t[23]=e("span",{class:"inline-block w-1/3 md:hidden font-bold"},"::",-1)),l.status!=="active"?(r(),d("label",Le," ยกเลิกเมื่อ "+o(m(f)(l.updated_at).locale("th").format("D MMM BBBB HH:mm"))+" น. ",1)):n("",!0),l.status!=="canceled"&&l.action!=="checkin"&&l.user_id===s.$page.props.auth.user.id?(r(),d("button",{key:1,onClick:B=>O(l.id),class:"ml-3 bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-2 border border-red-500 rounded"},t[21]||(t[21]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,$e)):n("",!0),l.status!=="canceled"&&l.action==="checkin"&&l.user_id===s.$page.props.auth.user.id?(r(),d("button",{key:2,onClick:B=>V(l.id,s.$page.props.stock_item.item_name,l.pur_order),class:"ml-3 bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-1 px-2 border border-yellow-500 rounded"},t[22]||(t[22]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Oe)):n("",!0)])]))),128))])]),e("button",{onClick:t[1]||(t[1]=l=>M()),class:"w-full flex justify-center my-2 py-2 text-md bg-blue-500 hover:bg-blue-700 text-white border border-blue-500 rounded"}," กลับ "),w(k,{isModalOpen:p.value},{header:u(()=>t[25]||(t[25]=[e("p",{class:"text-md font-bold text-blue-700"}," ยืนยันการลบ",-1)])),body:u(()=>t[26]||(t[26]=[e("div",{class:"text-gray-900 text-md font-medium"},[e("label",{class:"flex justify-start w-full text-md"}," คุณต้องการลบข้อมูลการตัดสต๊อกวัสดุนี้ใช่หรือไม่? ")],-1)])),footer:u(()=>[e("div",{class:"w-full text-center md:block"},[e("button",{class:"mx-4 md:mb-0 bg-green-600 px-5 py-2 text-sm shadow-sm font-medium tracking-wider border text-white rounded-full hover:shadow-lg hover:bg-green-400",onClick:D}," ตกลง "),e("button",{class:"mx-4 md:mb-0 bg-red-500 border border-red-500 px-5 py-2 text-sm shadow-sm font-medium tracking-wider text-white rounded-full hover:shadow-lg hover:bg-red-600",onClick:S}," ยกเลิก ")])]),_:1},8,["isModalOpen"]),w(k,{isModalOpen:g.value},{header:u(()=>t[27]||(t[27]=[e("p",{class:"text-md font-bold text-blue-700"},"คุณต้องการลบวัสดุนี้ออกจากข้อมูลคลังวัสดุใช่หรือไม่?",-1)])),body:u(()=>[e("div",De,[e("label",Se," ชื่อวัสดุ:"+o(v.value),1),e("label",Ve," Pur.Order:"+o(y.value),1),t[28]||(t[28]=e("label",{class:"flex mt-4 text-red-600 justify-start w-full text-sm"}," ***คำเตือน:หากลบรายการวัสดุนี้ ข้อมูลการตัดสต๊อกของวัสดุนี้จะถูกลบไปโดยอัตโนมัติด้วย ",-1))])]),footer:u(()=>[e("div",{class:"w-full text-center md:block"},[e("button",{class:"mx-4 md:mb-0 bg-green-600 px-5 py-2 text-sm shadow-sm font-medium tracking-wider border text-white rounded-full hover:shadow-lg hover:bg-green-400",onClick:P}," ตกลง "),e("button",{class:"mx-4 md:mb-0 bg-red-500 border border-red-500 px-5 py-2 text-sm shadow-sm font-medium tracking-wider text-white rounded-full hover:shadow-lg hover:bg-red-600",onClick:A}," ยกเลิก ")])]),_:1},8,["isModalOpen"]),w(k,{isModalOpen:h.value},{header:u(()=>t[29]||(t[29]=[e("p",{class:"text-md font-bold text-blue-700"},"แก้ไขราคาวัสดุ",-1)])),body:u(()=>[e("div",Pe,[e("label",Ae," ราคาปัจจุบัน:"+o(x(_.value))+" บาท / หน่วย ",1),t[30]||(t[30]=e("label",{class:"flex justify-start w-full text-md"}," ระบุราคาที่ต้องการแก้ไข: ",-1)),H(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=l=>m(c).price_edit_new=l),class:"w-full px-12 py- border-2 border-blue-600 rounded-md appearance-none focus:border-blue-700 focus:ring focus:ring-opacity-40 focus:ring-blue-500"},null,512),[[I,m(c).price_edit_new]])])]),footer:u(()=>[e("div",{class:"w-full text-center md:block"},[e("button",{class:"mx-4 md:mb-0 bg-green-600 px-5 py-2 text-sm shadow-sm font-medium tracking-wider border text-white rounded-full hover:shadow-lg hover:bg-green-400",onClick:$}," ตกลง "),e("button",{class:"mx-4 md:mb-0 bg-red-500 border border-red-500 px-5 py-2 text-sm shadow-sm font-medium tracking-wider text-white rounded-full hover:shadow-lg hover:bg-red-600",onClick:L}," ยกเลิก ")])]),_:1},8,["isModalOpen"])]),_:1}))}};export{Te as default};
