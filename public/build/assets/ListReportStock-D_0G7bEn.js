import{r as m,u as M,i as h,s as S,x as C,j as N,f as w,c as o,k as i,a as e,o as l,d as g,t as r,w as _,e as c,F as p,g as v,l as V,y as L,v as O,b as k,n as E,p as z}from"./app-3-81Xgwv.js";import{A as F}from"./AppLayout-CpSAxy21.js";import{_ as P}from"./PaginateMe-U0y200fH.js";import{d as y,b as A}from"./buddhistEra-DASm4GcX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Navbar-SH8ePkG9.js";const D={key:0,class:"alert-banner fixed right-0 m-2 w-5/6 md:w-full max-w-sm"},R={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-red-300 shadow-xs rounded-md text-red-800 font-bold",title:"close",for:"banneralert"},$={class:"flex flex-col mb-2 text-md font-bold text-gray-900"},q={class:"m-2"},I={key:0,class:"text-red-600"},T=["value"],U={class:"flex flex-col"},G={key:1,class:"p-2 mt-3 text-center text-red-600 font-bold"},H={key:2,class:"p-2 mt-3 text-center font-bold"},J={class:"p-2 mt-1 text-center font-bold"},K={key:3,class:"p-2 text-center font-bold"},Q={key:4,class:"w-full"},W={key:5,class:"w-full p-2"},X={key:0},Y={class:"w-full mt-3"},Z={class:"flex flex-col lg:flex-row"},ee={class:"bg-blue-100 lg:bg-transparent lg:w-2/12 lg:text-xs"},te={for:"",class:""},se={class:"font-bold"},le={for:"",class:"text-blue-600"},oe={class:"lg:w-1/12"},re={class:"inline-flex px-2 text-lg font-semibold leading-5 text-green-800 bg-green-100 rounded-full"},de={class:"lg:w-1/12"},ae={class:"ml-2"},ne={class:"lg:w-3/12 lg:text-xs"},ie={class:"ml-2"},ce={class:"lg:w-2/12 lg:text-xs"},ue={key:0,for:"",class:"text-xs text-green-700"},xe={key:1,for:"",class:"text-xs text-yellow-600"},fe={class:"ml-2"},ge={class:"lg:w-1/12 lg:text-xs"},be={class:"ml-2"},me={class:"lg:w-1/12 lg:text-xs"},he={class:"ml-2"},we={class:"lg:w-1/12 lg:text-xs"},_e={key:0},pe={key:1,class:"ml-2 text-xl"},ve={class:"lg:w-1/12"},ke=["href"],Ne={__name:"ListReportStock",props:{stocks:{type:Object,required:!1},stock_items:Object,stock_items_count:{type:Number},stock_selected:{type:Number},stock_selected_name:{type:Object,required:!1},filters:{type:Object}},setup(d){y.extend(A);const x=d;let u=m(x.filters.search);const f=m(!1),n=M({stock_selected:x.stock_selected?x.stock_selected:0,unitid:h().props.auth.user.unitid?h().props.auth.user.unitid:0}),b=a=>a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");S(u,a=>{C.get(route("report-list",n.unitid),{search:a,stock_selected:n.stock_selected},{preserveState:!0,replace:!0})});const j=()=>{if(f.value=!1,n.stock_selected.length==0)return f.value=!0,!1;n.get(route("report-list",n.unitid),{preserveState:!0,preserveScroll:!0,onSuccess:a=>{},onError:a=>{},onFinish:a=>{}})};return(a,t)=>(l(),N(F,null,{default:w(()=>[a.$page.props.flash.status=="error"?(l(),o("div",D,[t[4]||(t[4]=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1)),e("label",R,[g(r(a.$page.props.flash.msg)+" ",1),t[3]||(t[3]=e("svg",{class:"fill-current text-white",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1))])])):i("",!0),t[18]||(t[18]=e("h4",{class:"mt-3 text-center text-black"},"ระบุชื่อคลังวัสดุที่ต้องการดูรายงาน",-1)),e("div",$,[e("div",q,[t[5]||(t[5]=e("label",{for:""},"เลือกชื่อคลังวัสดุ",-1)),f.value?(l(),o("label",I," !กรุณาเลือกคลังวัสดุ")):i("",!0),_(e("select",{name:"",id:"","onUpdate:modelValue":t[0]||(t[0]=s=>c(n).stock_selected=s),class:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-2 py-2 pr-6 rounded-xs shadow-xs leading-tight focus:outline-hidden focus:shadow-outline"},[(l(!0),o(p,null,v(d.stocks,s=>(l(),o("option",{key:s.id,value:s.id},r(s.stockname),9,T))),128))],512),[[V,c(n).stock_selected]])])]),e("div",U,[e("button",{class:"w-full flex justify-center px-8 py-2 mb-2 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-400 focus:outline-hidden",onClick:t[1]||(t[1]=s=>j())}," ค้นหา ")]),d.stock_items_count==0?(l(),o("h1",G,"ไม่พบข้อมูลวัสดุในคลังที่ต้องการดูรายงาน ")):i("",!0),d.stock_items_count!=0?(l(),o("h1",H,"รายงานจำนวนคงเหลือในคลังวัสดุ ")):i("",!0),e("h1",J,r(c(n).stock_selected.text),1),d.stock_selected_name?(l(),o("h1",K,r(d.stock_selected_name.stockname),1)):i("",!0),d.stock_items_count!=0?(l(),o("div",Q,[_(e("input",{type:"text",placeholder:"พิมพ์รหัสวัสดุ หรือชื่อวัสดุ หรือชื่อบริษัท ที่ต้องการค้นหา","onUpdate:modelValue":t[2]||(t[2]=s=>L(u)?u.value=s:u=s),class:"mt-2 border-green-600 border-2 block w-full shadow-xs sm:text-sm rounded-md"},null,512),[[O,c(u)]])])):i("",!0),d.stock_items_count!=0?(l(),o("div",W,[e("div",null,[d.stock_items?(l(),o("div",X,[k(P,{pagination:d.stock_items},null,8,["pagination"])])):i("",!0),t[6]||(t[6]=e("div",{class:"w-full my-3 border-b-4 border-gray-500 shadow-xs hidden lg:block"},[e("div",{class:"flex flex-col text-xs lg:flex-row lg:justify-between mx-2"},[e("div",{class:"lg:w-2/12"}," SAP-ชื่อวัสดุ "),e("div",{class:"lg:w-1/12"}," จำนวนคงเหลือ "),e("div",{class:"lg:w-1/12"}," ราคา "),e("div",{class:"lg:w-3/12"}," ชื่อบริษัท "),e("div",{class:"lg:w-2/12"}," Pur.Order "),e("div",{class:"lg:w-1/12"}," Invoice Number "),e("div",{class:"lg:w-1/12"}," วันที่รับเข้า "),e("div",{class:"lg:w-1/12"}," จำนวนวันที่อยู่ในคลัง "),e("div",{class:"lg:w-1/12 text-xs"}," ประวัติรับเข้า-เบิกออก ")])],-1))]),e("div",Y,[(l(!0),o(p,null,v(d.stock_items.data,(s,B)=>(l(),o("div",{key:s.index,class:"w-full border-b-2 border-gray-500 shadow-xs"},[e("div",Z,[e("div",ee,[e("label",te,r(d.stock_items.from+B)+". ",1),e("label",se,[g(r(s.item_code)+" ",1),e("label",le,"-"+r(s.item_name),1)])]),e("div",oe,[t[8]||(t[8]=e("label",{for:"",class:"lg:hidden"},"จำนวนคงเหลือ:",-1)),e("span",re,[t[7]||(t[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1)),g(" "+r(b(s.item_balance)),1)])]),e("div",de,[t[9]||(t[9]=e("label",{for:"",class:"lg:hidden"},"ราคา:",-1)),e("label",ae,r(b(s.price_last)),1)]),e("div",ne,[t[10]||(t[10]=e("label",{for:"",class:"lg:hidden"},"ชื่อบริษัท:",-1)),e("label",ie,r(s.business_name),1)]),e("div",ce,[t[11]||(t[11]=e("label",{for:"",class:"lg:hidden"},"Pur.Order:",-1)),s.status==1?(l(),o("label",ue,"สัญญาซื้อ")):(l(),o("label",xe,"ใบสั่งซื้อ")),e("label",fe,r(s.pur_order),1)]),e("div",ge,[t[12]||(t[12]=e("label",{for:"",class:"lg:hidden"},"Invoice Number:",-1)),e("label",be,r(s.invoice_number),1)]),e("div",me,[t[13]||(t[13]=e("label",{for:"",class:"lg:hidden"},"วันที่รับเข้า:",-1)),e("label",he,r(c(y)(s.checkin_last.date_action).locale("th").format("D MMM BBBB")),1)]),e("div",we,[t[15]||(t[15]=e("label",{for:"",class:"lg:hidden"},"จำนวนวันที่อยู่ในคลัง:",-1)),s.item_balance!=0?(l(),o("div",_e,[e("label",{class:E(["ml-2 text-xl",{"text-red-500 text-xl":s.item_time_in_stock>30}])},r(s.item_time_in_stock),3)])):(l(),o("div",pe,[...t[14]||(t[14]=[e("label",null,"-",-1)])]))]),e("div",ve,[t[17]||(t[17]=e("label",{for:"",class:"hidden"}," ประวัติรับเข้า-เบิกออก",-1)),k(c(z),{href:a.route("list-stock-item",s.hashed_key)},{default:w(()=>[...t[16]||(t[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 text-green-700"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),_:1},8,["href"])])])]))),128)),e("a",{class:"flex justify-center mt-3 px-8 py-1 text-md text-white bg-blue-700 rounded-xs shadow-md hover:bg-blue-500 focus:outline-hidden",href:a.route("export-balance-stock",d.stock_items.data[0].stock_id)}," Export Excel ",8,ke)])])):i("",!0)]),_:1}))}};export{Ne as default};
