import{r as v,P as j,o as l,c as n,a as e,f as u,t as o,b as x,d as b,u as c,k as O,i as h,w as k,v as $,n as I,F as M,J as B,B as A,h as D,j as E,e as C,E as N,y as U}from"./app.0d887349.js";import{_ as Y}from"./ModalUpToYou.6d8a5a63.js";import{d as w,b as q}from"./buddhistEra.a13c5486.js";import{A as F}from"./AppLayout.dd61aefd.js";import{_ as L}from"./PaginateMe.e0c520e0.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./Navbar.4d4f3f8c.js";const J={class:"w-full mt-2 border-2 border-gray-500 rounded-lg"},K={key:0,class:"flex bg-pink-200 overflow-hidden text-center bg-cover rounded-t"},P=e("div",null,[e("label",null,"\u0E2A\u0E31\u0E0D\u0E0D\u0E32\u0E0B\u0E37\u0E49\u0E2D")],-1),T=[P],H={key:1,class:"flex bg-blue-200 items-center overflow-hidden text-center bg-cover rounded-t"},R=e("div",null,[e("label",null,"\u0E43\u0E1A\u0E2A\u0E31\u0E48\u0E07\u0E0B\u0E37\u0E49\u0E2D")],-1),G=[R],Q={class:"w-full leading-normal border-b border-l border-r border-gray-200 rounded-b lg:border-l-0 lg:border-t lg:border-gray-200 lg:rounded-b-none lg:rounded-r"},W={class:"mb-2"},X={class:"p-2 text-md font-bold text-gray-900"},Z={for:"",class:"text-blue-600"},ee=e("span",{class:"inline-flex text-md font-semibold leading-5 text-green-800 bg-green-200 rounded-lg"}," \u0E1B\u0E23\u0E30\u0E27\u0E31\u0E15\u0E34\u0E01\u0E32\u0E23\u0E23\u0E31\u0E1A\u0E40\u0E02\u0E49\u0E32\u0E41\u0E25\u0E30\u0E40\u0E1A\u0E34\u0E01\u0E2D\u0E2D\u0E01 ",-1),te={class:"flex flex-col lg:flex-col mb-2 text-md font-bold text-gray-900"},se={class:"flex ml-2"},oe=u(" \u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E21\u0E35 : "),le={class:"ml-2 text-red-600"},ne={class:"inline-flex px-2 text-lg font-semibold leading-5 text-green-800 bg-green-100 rounded-full"},re=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1),ae={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6 text-red-500"},ie=e("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"},null,-1),ce=[ie],de={class:"flex ml-2"},ue=u(" \u0E23\u0E32\u0E04\u0E32\u0E15\u0E48\u0E2D\u0E2B\u0E19\u0E48\u0E27\u0E22 : "),me={class:"ml-2 text-blue-600"},he={class:"flex ml-2"},_e=u(" Pur.Order : "),fe={class:"ml-2 text-blue-600"},ve={class:"flex ml-2"},ge=u(" \u0E0A\u0E37\u0E48\u0E2D\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17 : "),be={class:"ml-2 text-blue-600"},xe={class:"flex ml-2"},pe=u(" \u0E27\u0E31\u0E19\u0E2B\u0E21\u0E14\u0E2D\u0E32\u0E22\u0E38(Lot. \u0E25\u0E48\u0E32\u0E2A\u0E38\u0E14) : "),we={class:"ml-2 text-blue-600"},ke={class:"flex ml-2"},ye=u(" \u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E23\u0E31\u0E1A\u0E40\u0E02\u0E49\u0E32(Lot. \u0E25\u0E48\u0E32\u0E2A\u0E38\u0E14) : "),$e={class:"ml-2 text-blue-600"},Me=e("div",{class:"flex ml-2"},[e("p",{class:"ml-2 text-red-600 text-xs"}," *\u0E04\u0E25\u0E34\u0E4A\u0E01\u0E17\u0E35\u0E48 icon \u0E23\u0E39\u0E1B\u0E1B\u0E0E\u0E34\u0E17\u0E34\u0E19\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1A\u0E34\u0E01")],-1),Ie={key:0,class:"flex flex-col lg:flex-row mb-2 text-md font-bold text-gray-900"},Be={class:"m-2"},Ce={class:"flex justify-start"},Le={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-red-600",viewBox:"0 0 20 20",fill:"currentColor"},je=e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1),ze=[je],Se=e("label",null,"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1A\u0E34\u0E01:",-1),Ve=["max"],Oe={class:"m-2"},Ae={class:"flex justify-start"},De={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-red-600",viewBox:"0 0 20 20",fill:"currentColor"},Ee=e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1),Ne=[Ee],Ue=e("label",{for:""},"\u0E08\u0E33\u0E19\u0E27\u0E19:",-1),Ye=["max"],qe={class:"mx-2 text-center bg-red-600 text-sm text-white"},Fe={key:0},Je={key:1},Ke={key:1,class:"flex flex-col lg:flex-row px-2 py-2"},Pe=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),Te=u(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E01\u0E32\u0E23\u0E40\u0E1A\u0E34\u0E01 "),He=[Pe,Te],Re=e("p",{class:"text-md font-bold text-red-600"},"\u0E04\u0E38\u0E13\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E01\u0E32\u0E23\u0E40\u0E1A\u0E34\u0E01\u0E27\u0E31\u0E2A\u0E14\u0E38\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E19\u0E35\u0E49\u0E43\u0E0A\u0E48\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48?",-1),Ge={class:"text-gray-900 text-md font-medium"},Qe={class:"mt-2"},We={name:"CheckoutItem",props:{itemIndex:{type:Number},stockItem:{type:Object,required:!0},canAbility:{type:Object,required:!0}},setup(t){w.extend(q);const g=v(!1),d=v(!1),a=v(!1),m=v(""),r=v(!1),s=j({unit_checkout:0,date_checkout:"",confirm_item_name:"",confirm_item_slug:"",confirm_item_date:"",confirm_item_count:""}),i=_=>_.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),y=_=>{if(s.date_checkout.length==0)return d.value=!0,m.value="\u0E01\u0E23\u0E38\u0E13\u0E32\u0E23\u0E30\u0E1A\u0E38\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1A\u0E34\u0E01",!1;if(d.value=!1,s.unit_checkout==0)return a.value=!0,m.value="\u0E01\u0E23\u0E38\u0E13\u0E32\u0E23\u0E30\u0E1A\u0E38\u0E08\u0E33\u0E19\u0E27\u0E19",!1;if(a.value=!1,Number.isInteger(s.unit_checkout))a.value=!1;else return a.value=!0,m.value="\u0E01\u0E23\u0E38\u0E13\u0E32\u0E23\u0E30\u0E1A\u0E38\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1A\u0E34\u0E01\u0E27\u0E31\u0E2A\u0E14\u0E38\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E40\u0E15\u0E47\u0E21",!1;if(s.unit_checkout>_.item_balance)return a.value=!0,r.value=!0,m.value="\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1A\u0E34\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E44\u0E21\u0E48\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32\u0E08\u0E33\u0E19\u0E27\u0E19\u0E04\u0E07\u0E40\u0E2B\u0E25\u0E37\u0E2D",!1;if(a.value=!1,r.value=!1,s.unit_checkout<0)return a.value=!0,r.value=!0,m.value="\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1A\u0E34\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E44\u0E21\u0E48\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E15\u0E34\u0E14\u0E25\u0E1A",!1;a.value=!1,r.value=!1,g.value=!0,s.confirm_item_slug=_.slug,s.confirm_item_name=_.item_name,s.confirm_item_date=s.date_checkout,s.confirm_item_count=s.unit_checkout},z=()=>{g.value=!1},S=()=>{g.value=!1,s.post(route("checkout-stock-item"),{preserveState:!1,preserveScroll:!0,onError:_=>{console.log("error")}})},V=()=>(d.value=!0,m.value="\u0E01\u0E23\u0E38\u0E13\u0E32\u0E23\u0E30\u0E1A\u0E38\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E42\u0E14\u0E22\u0E04\u0E25\u0E34\u0E4A\u0E01\u0E17\u0E35\u0E48\u0E23\u0E39\u0E1B\u0E1B\u0E0E\u0E34\u0E17\u0E34\u0E19",document.getElementById("dateCheckout").value="",!1);return(_,f)=>(l(),n(M,null,[e("div",J,[t.stockItem.status==1?(l(),n("div",K,T)):(l(),n("div",H,G)),e("div",Q,[e("div",W,[e("div",X,[u(o(t.itemIndex+1)+". \u0E23\u0E2B\u0E31\u0E2A\u0E27\u0E31\u0E2A\u0E14\u0E38:"+o(t.stockItem.item_code)+" ",1),e("label",Z,o(t.stockItem.item_name),1),u(" (\u0E2B\u0E19\u0E48\u0E27\u0E22: "+o(t.stockItem.unit_count)+") ",1),x(c(O),{href:_.route("list-stock-item",t.stockItem)},{default:b(()=>[ee]),_:1},8,["href"])]),e("div",te,[e("div",se,[oe,e("p",le,[e("span",ne,[re,u(o(i(t.stockItem.item_balance)),1)])]),t.stockItem.item_balance<6?(l(),n("svg",ae,ce)):h("",!0)]),e("div",de,[ue,e("p",me,o(i(t.stockItem.checkin_last.price))+" \u0E1A\u0E32\u0E17 ",1)]),e("div",he,[_e,e("p",fe,o(t.stockItem.checkin_last.pur_order),1)]),e("div",ve,[ge,e("p",be,o(t.stockItem.checkin_last.business_name),1)]),e("div",xe,[pe,e("p",we,o(c(w)(t.stockItem.checkin_last.date_expire).locale("th").format("D MMMM BBBB")),1)]),e("div",ke,[ye,e("p",$e,o(c(w)(t.stockItem.checkin_last.date_action).locale("th").format("D MMMM BBBB")),1)])]),Me,t.canAbility.checkout_item&&t.stockItem.item_balance!=0?(l(),n("div",Ie,[e("div",Be,[e("div",Ce,[d.value?(l(),n("svg",Le,ze)):h("",!0),Se]),e("div",null,[k(e("input",{type:"date",id:"dateCheckout","onUpdate:modelValue":f[0]||(f[0]=p=>c(s).date_checkout=p),max:c(w)(new Date).locale("th").format("YYYY-MM-DD"),class:I(["w-full px-12 py-2 border-2 rounded-md appearance-none focus:border-indigo-600 focus:ring focus:ring-opacity-40 focus:ring-indigo-500",[d.value?"border-red-500 border-2 ":"border-gray-400"]]),onKeydown:V},null,42,Ve),[[$,c(s).date_checkout]])])]),e("div",Oe,[e("div",Ae,[a.value?(l(),n("svg",De,Ne)):h("",!0),Ue]),e("div",null,[k(e("input",{type:"number",name:"",id:"",min:0,max:t.stockItem.item_balance,pattern:"[0-9]","onUpdate:modelValue":f[1]||(f[1]=p=>c(s).unit_checkout=p),class:I(["w-full px-12 py- border-2 rounded-md appearance-none focus:border-indigo-600 focus:ring focus:ring-opacity-40 focus:ring-indigo-500",[a.value?"border-red-500 border-2 ":"border-gray-400"]])},null,10,Ye),[[$,c(s).unit_checkout]])])])])):h("",!0),e("div",qe,[d.value?(l(),n("label",Fe,"!!! "+o(m.value)+" !!!",1)):h("",!0),a.value?(l(),n("label",Je,"!!! "+o(m.value)+" !!!",1)):h("",!0)]),t.canAbility.checkout_item&&t.stockItem.item_balance!=0?(l(),n("div",Ke,[e("button",{class:"flex justify-center px-4 py-1 text-sm text-white bg-green-600 rounded-md hover:bg-green-400 focus:outline-none",onClick:f[2]||(f[2]=p=>y(t.stockItem))},He)])):h("",!0)])])]),x(Y,{isModalOpen:g.value},{header:b(()=>[Re]),body:b(()=>[e("div",Ge,[e("p",Qe,o(c(s).confirm_item_name)+" \u0E40\u0E1A\u0E34\u0E01\u0E43\u0E0A\u0E49\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48 "+o(c(s).confirm_item_date)+" \u0E08\u0E33\u0E19\u0E27\u0E19 "+o(c(s).confirm_item_count)+" \u0E0A\u0E34\u0E49\u0E19",1)])]),footer:b(()=>[e("div",{class:"w-full text-center md:block"},[e("button",{class:"mx-4 md:mb-0 bg-green-600 px-5 py-2 text-sm shadow-sm font-medium tracking-wider border text-white rounded-full hover:shadow-lg hover:bg-green-400",onClick:S}," \u0E15\u0E01\u0E25\u0E07 "),e("button",{class:"mx-4 md:mb-0 bg-red-500 border border-red-500 px-5 py-2 text-sm shadow-sm font-medium tracking-wider text-white rounded-full hover:shadow-lg hover:bg-red-600",onClick:z}," \u0E22\u0E01\u0E40\u0E25\u0E34\u0E01 ")])]),_:1},8,["isModalOpen"])],64))}},Xe={key:0,class:"alert-banner fixed right-0 m-2 w-5/6 md:w-full max-w-sm"},Ze=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1),et={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-green-300 shadow rounded-md text-green-800 font-bold",title:"close",for:"banneralert"},tt=e("svg",{class:"fill-current text-white",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1),st={key:1,class:"alert-banner fixed right-0 mt-8 w-2/3 md:w-full max-w-sm"},ot=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1),lt={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-red-200 shadow rounded-md text-red-700 font-bold text-2xl border-2 border-red-500",title:"close",for:"banneralert"},nt=e("svg",{class:"fill-current text-red-700 w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1),rt={key:2},at={class:"w-full flex justify-center bg-blue-100 p-2 rounded-md"},it={key:3},ct={class:"w-full bg-blue-100 p-2 rounded-md"},dt={class:"bg-blue-800 text-white text-xl text-center"},ut=e("div",{class:"mt-3"},[e("label",{for:""},"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E04\u0E25\u0E31\u0E07\u0E27\u0E31\u0E2A\u0E14\u0E38")],-1),mt=["value"],ht={class:"w-full"},_t=e("div",{class:"w-full flex mt-2 text-sm rounded-md"},[e("div",{class:"w-full flex"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-8 h-8 text-red-500"},[e("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"})]),e("label",{for:""},"\u0E40\u0E15\u0E37\u0E2D\u0E19\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E27\u0E31\u0E2A\u0E14\u0E38\u0E21\u0E35\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32 6 \u0E0A\u0E34\u0E49\u0E19 ")])],-1),ft={class:"w-full p-2"},yt={name:"index",props:{stocks:Array,stock_items:Object,unit:Object,errors:Object,can:{type:Object,required:!0},stock_status:{type:String},filters:{type:Object}},setup(t){let d=v(t.filters.search);const a=j({filter_key:"",stock_id:B().props.auth.user.unitid?B().props.auth.user.unitid:0});A(d,r=>{U.get(route("stock"),{search:r},{preserveState:!0,replace:!0})});const m=()=>{a.get(route("stock"),{preserveState:!0,preserveScroll:!0,onSuccess:r=>{console.log("success")},onError:r=>{console.log("error")},onFinish:r=>{console.log("finish")}})};return(r,s)=>(l(),D(F,null,{default:b(()=>[r.$page.props.flash.status=="success"?(l(),n("div",Xe,[Ze,e("label",et,[u(o(r.$page.props.flash.msg)+" ",1),tt])])):h("",!0),r.$page.props.flash.status=="error"?(l(),n("div",st,[ot,e("label",lt,[u(o(r.$page.props.flash.msg)+" ",1),nt])])):h("",!0),t.stock_status=="close"?(l(),n("div",rt,[e("div",at," \u0E04\u0E25\u0E31\u0E07"+o(r.$page.props.auth.user.profile.division_name)+" \u0E16\u0E39\u0E01\u0E1B\u0E34\u0E14\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19 ",1)])):(l(),n("div",it,[e("div",ct,[e("div",dt,o(r.$page.props.unit.unitname),1),ut,k(e("select",{name:"",id:"",class:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-2 py-2 pr-6 rounded shadow leading-tight focus:outline-none focus:shadow-outline","onUpdate:modelValue":s[0]||(s[0]=i=>c(a).stock_id=i),onChange:s[1]||(s[1]=i=>m())},[(l(!0),n(M,null,C(r.$page.props.stocks,i=>(l(),n("option",{key:i.id,value:i.id},o(i.stockname),9,mt))),128))],544),[[E,c(a).stock_id]])]),e("div",ht,[k(e("input",{type:"text",placeholder:"\u0E1E\u0E34\u0E21\u0E1E\u0E4C\u0E23\u0E2B\u0E31\u0E2A\u0E27\u0E31\u0E2A\u0E14\u0E38 \u0E2B\u0E23\u0E37\u0E2D\u0E0A\u0E37\u0E48\u0E2D\u0E27\u0E31\u0E2A\u0E14\u0E38 \u0E2B\u0E23\u0E37\u0E2D\u0E0A\u0E37\u0E48\u0E2D\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17 \u0E17\u0E35\u0E48\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E04\u0E49\u0E19\u0E2B\u0E32","onUpdate:modelValue":s[2]||(s[2]=i=>N(d)?d.value=i:d=i),class:"mt-2 border-green-600 border-2 block w-full shadow-sm sm:text-sm rounded-md"},null,512),[[$,c(d)]])]),_t,e("div",ft,[x(L,{pagination:t.stock_items},null,8,["pagination"]),(l(!0),n(M,null,C(t.stock_items.data,(i,y)=>(l(),n("div",{key:i.id,class:"m-2 p-2"},[x(We,{itemIndex:y,stockItem:i,canAbility:t.can},null,8,["itemIndex","stockItem","canAbility"])]))),128)),x(L,{pagination:t.stock_items},null,8,["pagination"])])]))]),_:1}))}};export{yt as default};
