import{C,r as b,i as V,e as c,o,c as l,a as e,b as w,t as r,j as m,w as g,k as z,u as i,f as h,F as x,v as k,d as $}from"./app-CP6RF8In.js";import{A as N}from"./AppLayout-6jvfy5Lo.js";import{_ as U}from"./ModalUpToYou-Bop7fH5u.js";import{d as y,b as F}from"./buddhistEra-DwBBCdWO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Navbar-O2L6vFPL.js";const H={key:0,class:"alert-banner fixed right-0 m-4 w-2/3 md:w-full max-w-sm"},D={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-green-300 shadow rounded-md text-green-800 font-bold",title:"close",for:"banneralert"},E={key:1,class:"alert-banner fixed right-0 m-4 w-2/3 md:w-full max-w-sm"},O={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-yellow-200 shadow rounded-md text-yellow-800 font-bold",title:"close",for:"banneralert"},T={key:2,class:"alert-banner fixed right-0 m-4 w-2/3 md:w-full max-w-sm"},q={class:"close cursor-pointer flex items-center justify-between w-full p-2 bg-red-200 shadow rounded-md text-red-800 font-bold",title:"close",for:"banneralert"},G={class:"w-full p-4 flex-col justify-center bg-blue-100 rounded-md"},I={class:"w-full bg-blue-100 p-2 rounded-md"},J=["value"],K={key:0,class:"w-full text-sm my-2 rounded-md"},P=["value"],Q={class:"flex flex-col lg:flex-row"},R={class:"bg-red-100"},W={class:""},X={class:"mx-2 text-xs"},Y={class:"flex justify-center"},Z=["href"],ee=["href"],te={key:1,class:"w-full p-2 my-2 rounded-md"},se={class:"my-2"},oe={key:2},le={class:"w-full bg-blue-100 p-2 rounded-md"},ne={class:"w-full bg-blue-100 p-2 rounded-md"},re={class:""},de={class:"text-gray-900 text-md font-medium"},ie={for:"",class:"flex justify-start w-full text-sm"},ae={class:"flex justify-start w-full text-sm"},ge={__name:"AddStock",props:{units:Object,status:String,msg:String,unit_search:{type:Number},list_stock_unit:{type:Array,default:[]}},setup(u){y.extend(F);const a=u,n=C({unit_selected:a.unit_search?a.unit_search:"",unit:a.unit_search?a.unit_search:0,stock_name_thai:"",stock_name_en:"",stocks_unit:a.list_stock_unit?a.list_stock_unit:""}),f=b(!1),p=b(!1),_=b(!1),j=()=>{p.value=!0},L=()=>{f.value=!1},S=()=>{let d={};return d=a.units.find(t=>t.unitid==n.unit),d.unitname},B=()=>{_.value=!0,n.get(route("stock-add"),{preserveState:!1,preserveScroll:!0})},M=()=>{f.value=!0},A=()=>{f.value=!1,n.post(route("stock-add-confirm"),{preserveState:!1,preserveScroll:!0,onSuccess:d=>{console.log("success")},onError:d=>{console.log("error")},onFinish:d=>{console.log("finish")}})};return(d,t)=>(o(),V(N,null,{default:c(()=>[u.status=="success"?(o(),l("div",H,[t[7]||(t[7]=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1)),e("label",D,[w(r(u.msg)+" ",1),t[6]||(t[6]=e("svg",{class:"fill-current text-white",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1))])])):m("",!0),u.status=="warning"?(o(),l("div",E,[t[9]||(t[9]=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1)),e("label",O,[w(r(u.msg)+" ",1),t[8]||(t[8]=e("svg",{class:"fill-current text-red",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1))])])):m("",!0),u.status=="error"?(o(),l("div",T,[t[11]||(t[11]=e("input",{type:"checkbox",class:"hidden",id:"banneralert"},null,-1)),e("label",q,[w(r(u.msg)+" ",1),t[10]||(t[10]=e("svg",{class:"fill-current text-red",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 18 18"},[e("path",{d:"M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"})],-1))])])):m("",!0),e("div",G,[t[21]||(t[21]=e("div",{class:"text-center text-lg font-bold"},[e("p",{class:"my-2"},"จัดการข้อมูลคลังวัสดุ")],-1)),e("div",I,[t[12]||(t[12]=e("div",{class:"mt-3"},[e("label",{for:""},"กรุณาเลือกหน่วยงานที่ต้องการเพิ่ม/แก้ไข คลัง:")],-1)),g(e("select",{name:"",id:"",class:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-2 py-2 pr-6 rounded shadow leading-tight focus:outline-none focus:shadow-outline","onUpdate:modelValue":t[0]||(t[0]=s=>i(n).unit=s),onChange:t[1]||(t[1]=s=>B(d.unit))},[(o(!0),l(x,null,h(u.units,s=>(o(),l("option",{key:s.id,value:s.unitid},r(s.unitname),9,J))),128))],544),[[z,i(n).unit]])]),a.list_stock_unit.length>0?(o(),l("div",K,[t[16]||(t[16]=e("label",{for:""},"รายชื่อคลังที่มีอยู่แล้วในหน่วย/สาขา นี้:",-1)),(o(!0),l(x,null,h(i(n).stocks_unit,(s,v)=>(o(),l("div",{key:v,value:s.id,class:"bg-white p-2 my-2 lg:flex lg:justify-between border-b-2 border-gray-300"},[e("div",Q,[e("div",null,r(v+1)+". "+r(s.stockname)+"("+r(s.stockengname)+") ",1),e("div",null,[t[13]||(t[13]=e("label",{class:"p-2 text-blue-600"},"สถานะ:",-1)),e("label",R,r(s.status_name),1)]),e("div",W,[e("label",X," แก้ไขล่าสุดเมื่อ: "+r(i(y)(s.updated_at).locale("th").format("D MMM BBBB H:mm"))+" น. ",1)])]),e("div",Y,[d.$page.props.auth.user.roles[0].name=="admin_med_stock"?(o(),l("a",{key:0,href:d.route("show-detail-stock",s),class:"mx-2 rounded-md shadow-md bg-yellow-200"},t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1)]),8,Z)):m("",!0),d.$page.props.auth.user.roles[0].name=="admin_it"?(o(),l("a",{key:1,href:d.route("get-stock-log",s),class:"mx-2 rounded-md shadow-md bg-blue-300"},t[15]||(t[15]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]),8,ee)):m("",!0)])],8,P))),128))])):(o(),l("div",te,t[17]||(t[17]=[e("label",{for:""},"ไม่พบรายชื่อคลังในหน่วย/สาขา นี้",-1)]))),e("div",se,[a.unit_search?(o(),l("button",{key:0,type:"submit",class:"w-full flex justify-center py-2 text-md bg-blue-500 hover:bg-blue-700 text-white border border-blue-500 rounded",onClick:t[2]||(t[2]=s=>j())},t[18]||(t[18]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),w(" เพิ่มคลังวัสดุ ")]))):m("",!0)]),p.value?(o(),l("div",oe,[e("div",le,[t[19]||(t[19]=e("div",{class:"mt-3"},[e("label",{for:""},"ระบุชื่อคลังวัสดุ(ภาษาไทย):")],-1)),g(e("input",{type:"text",class:"w-full py-2 rounded-md","onUpdate:modelValue":t[3]||(t[3]=s=>i(n).stock_name_thai=s)},null,512),[[k,i(n).stock_name_thai]])]),e("div",ne,[t[20]||(t[20]=e("div",{class:"mt-3"},[e("label",{for:""},"ระบุชื่อคลังวัสดุ(ภาษาอังกฤษ):")],-1)),g(e("input",{type:"text",class:"w-full py-2 rounded-md","onUpdate:modelValue":t[4]||(t[4]=s=>i(n).stock_name_en=s)},null,512),[[k,i(n).stock_name_en]])]),e("div",re,[e("button",{type:"submit",class:"w-full flex justify-center py-2 text-md bg-green-500 hover:bg-green-700 text-white border border-green-500 rounded",onClick:t[5]||(t[5]=s=>M())}," บันทึก ")])])):m("",!0)]),$(U,{isModalOpen:f.value},{header:c(()=>t[22]||(t[22]=[e("p",{class:"text-md font-bold text-red-600"},"คุณต้องการเพิ่มคลังวัสดุนี้ใช่หรือไม่?",-1)])),body:c(()=>[e("div",de,[e("label",ie," หน่วย/สาขา: "+r(S()),1),e("label",ae," ชื่อคลัง: "+r(i(n).stock_name_thai)+" ("+r(i(n).stock_name_en)+") ",1)])]),footer:c(()=>[e("div",{class:"w-full text-center md:block"},[e("button",{class:"mx-4 md:mb-0 bg-green-600 px-5 py-2 text-sm shadow-sm font-medium tracking-wider border text-white rounded-full hover:shadow-lg hover:bg-green-400",onClick:A}," ตกลง "),e("button",{class:"mx-4 md:mb-0 bg-red-500 border border-red-500 px-5 py-2 text-sm shadow-sm font-medium tracking-wider text-white rounded-full hover:shadow-lg hover:bg-red-600",onClick:L}," ยกเลิก ")])]),_:1},8,["isModalOpen"])]),_:1}))}};export{ge as default};
